@using scfs_erp.Models;
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}


@{
    ViewBag.Title = "Import Section";
}

<section id="main-content">
    <div class="col-md-12">
        <div class="row">
            <div class="col-md-12">
                <div class="box">
                    <div class="box-header">
                        <div class="box-name">
                            <i class="glyphicon glyphicon-import"></i>
                            <strong>Section</strong>
                        </div>
                    </div>@Html.Raw(ViewBag.msg)
                    <div class="box-content" data-ng-app="myModule">
                        <form action="@Url.Content("~/Section/savedata")" method="post" accept-charset="utf-8" id="frm" data-ng-controller="myController" name="frm" onsubmit="return Validate()">
                            @Html.ValidationSummary(true)
                            <fieldset id="ExportCartingOrder_info">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="col-md-3">

                                            <div class="form-group">
                                                <label>IGM No </label>@*@Html.ValidationMessageFor(model => model.masterdata[0].OSMIGMNO)*@
                                                <input type="text" class="OSMIGMNO form-control" name="OSMIGMNO" id="OSMIGMNO" placeholder="--Enter no-" tabindex="6" />
                                                @*@Html.TextBox("OSMIGMNO", new { @class = "form-control  OSMIGMNO", @id = "OSMIGMNO", @placeholder = "---Please Type IGMNO----", tabindex = "48", @required = "required" })*@

                                            </div>
                                        </div>
                                        <div class="col-md-3">

                                            <div class="form-group">
                                                <label>Line No </label>@*@Html.ValidationMessageFor(model => model.masterdata[0].OSMLNO)*@
                                                <input type="text" class="OSMLNO form-control" name="OSMLNO" id="OSMLNO" placeholder="Enter No" tabindex="7" />
                                                @*@Html.TextBox("OSMLNO", new { @class = "form-control  OSMLNO", @id = "OSMLNO", @required = "required", tabindex = "50", @placeholder = "---Please Type Line No----" })*@

                                            </div>
                                        </div>
                                        <div class="col-md-2">

                                            <div class="form-group">
                                                <br />
                                                <input type="button" name="search" value="Search" class="btn btn-success btn-xs" id="search" onclick="GetDetail()" tabindex="8" />
                                            </div>
                                        </div>



                                    </div>

                                    <input type="text" id="pd_index" value="0" style="display:none">

                                    <div style="float:right">
                                    </div>
                                    <div style="clear:both"> </div>
                                </div>

                                <div class="panel-heading navbar-inverse" style="color:white"> Details</div>

                                <table class="table table-striped table-bordered bootstrap-datatable TDETAIL" id="TDETAIL">
                                    <thead>
                                        <tr>

                                            <th>S No</th>
                                            <th>
                                                In Date
                                            </th>
                                            <th>
                                                Container No
                                            </th>
                                            <th>
                                                Size
                                            </th>

                                            <th>
                                                IGM NO

                                            </th>
                                            <th>
                                                LNO
                                            </th>
                                            <th>Steamer</th>
                                            <th>Section Remarks</th>
                                            <th>Gate In Remarks</th>
                                            <th><input type='checkbox' id='CHCK_ALL' name='CHCK_ALL' class='CHCK_ALL' onchange="checkall()" /></th>

                                        </tr>
                                    </thead>

                                    <tbody id="job_list">
                                    </tbody>
                                </table>




                                <table class='table table-striped table-bordered bootstrap-datatable'>
                                    <tr>
                                        <td class="col-md-1">Select</td>
                                        <td class="col-md-2">
                                            <select class="form-control GTYPE" name="GTYPE" onchange="GetSelValues()">
                                                <option value="0">Section 48</option>
                                                <option value="1">Auction File With UCC</option>
                                                <option value="2">Confiscated Goods</option>
                                                <option value="3">Destruction Cargo</option>
                                                <option value="4">Detained By DRI</option>
                                                <option value="5">Detained By SIIB</option>
                                                <option value="6">R&I Detained</option>
                                                <option value="7">Others</option>
                                            </select>
                                        </td>
                                        
                                        <td class="col-md-1">Remarks </td>

                                        <td colspan="2">
                                            <textarea class="form-control GREMRKS" name="GREMRKS" rows="4" cols="4"></textarea>
                                            <select class="form-control GSTYPE hide" name="GSTYPE"><option value="1">YES</option><option value="0" selected="selected">NO</option></select>
                                        </td>
                                    </tr>
                                   
                                </table>


                                <div class="col-md-12 box-footer">
                                    <a href="@Url.Action("Index", "Section")" class="btn btn-primary btn-xs  pull-left" onclick="javascript:return confirm('Are you sure you want to go back?')" tabindex="43">Go Back</a>
                                    
                                    <input type="submit" name="submit" value="Submit" class="btn btn-success btn-xs  " id="save" tabindex="5010" />

                                </div>

                            </fieldset>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts {

    <script type="text/javascript">
        function GetSelValues() {
            GTYPE = $(".GTYPE option:selected").val();
            GTYPEtext = $(".GTYPE option:selected").text();
            if (GTYPE != 7) {
                $(".GREMRKS").val(GTYPEtext);
                $(".GREMRKS").attr('readonly', 'readonly');
            }
            else {
                $(".GREMRKS").val("");
                $(".GREMRKS").removeAttr('readonly', 'readonly');
                //$(".GSTYPE").empty();
                //$(".GSTYPE").append("<option value=0>YES</option><option value=1>NO</option>");
            }
        }



        $(document).ready(function () {
            GetSelValues();




        });//.......end of bind



        function total() {
            i = 0; //$("#TRANGAMT").val("0");
            // $(".TRANDID").each(function () {
            $(".STFDIDS").each(function () {
                ckb = $(this).is(':checked');

                if (ckb == true) {

                    $(".boolSTFDIDS")[i].value = ckb;
                    //   if ($(".boolSTFDIDS")[i].value == "true") { count++; }


                }
                else {


                    $(".boolSTFDIDS")[i].value = false;

                }

                i++;
            });

        }

        //........get detail row.....................//
        function GetDetail() {
            // alert("SS");

            var igmno = $("#OSMIGMNO").val();
            var gplno = $("#OSMLNO").val();
            if (igmno == "") {
                alert('Please Enter IGM No');
                $("#OSMIGMNO").focus();
                return false;
            }
            if (gplno == "") {
                alert('Please Enter Line No');
                $("#OSMLNO").focus();
                return false;
            }


            url = "/Section/Detail/" + igmno + "~" + gplno + "~";
            // alert(url);


            $.ajax({
                url: url,
                success: function (data) {
                    //alert(data);
                    $("#job_list").html("");
                    $("#job_list").html(data);

                }

            });//---End of Post--------

        }



        function checkall() {
            i = 0; j = 0;
            CHCK_ALL = $("#CHCK_ALL").is(':checked');
            var tbl = $("#TDETAIL").find('tbody');


            $(".STFDIDS").each(function () {

                $trcur = tbl.find("tr:eq(" + i + ")");
                if (CHCK_ALL == true) {
                    $trcur.find(".STFDIDS").prop("checked", true);
                    $(".boolSTFDIDS")[i].value = "true"; //alert("i" + i);
                }
                else {
                    // alert("i..."+i);
                    $trcur.find(".STFDIDS").removeAttr("checked", true);
                    $(".boolSTFDIDS")[i].value = "false";
                }

                i++;

            });



        }/*.....*/
    </script>

}
