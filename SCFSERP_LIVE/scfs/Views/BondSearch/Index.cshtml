
@{
    ViewBag.Title = "Bond / ExBond Search";
}

<style>
    #sidebar {
        display: none;
    }

    #main-content {
        margin-left: auto;
    }
</style>
<div id="main-content">
    <div class="col-md-12">
        <div class="row">
            <div class="col-lg-12">
                <div class="box">
                    <div class="panel panel-primary" style="background: #323C55;">
                        <div class="panel-heading">
                            <div class="panel-title">
                                <i class="glyphicon glyphicon-import"></i>@ViewBag.Title
                                <a class="btn btn-success btn-sm pull-right" style="padding:3px;margin:0 0 10px" href="@Url.Action("Form", "ExBondInformation")"><i class="fa fa-plus-square "></i> Add New </a>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-3"> </div>
                        <div class="col-xs-6">
                            <form action="#" method="post" accept-charset="utf-8" id="exbondmasterform" data-ng-controller="myController" name="exbondmasterform">

                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Bond No<span class="required-field"></span> </label>
                                        <input type="text" id="BNDDNO" class="BNDDNO form-control" name="BNDDNO" value="@System.Web.HttpContext.Current.Session["BNDDNO"]" data-autocomplete-url=@Url.Action("AutoBondNo", "BondSearch") placeholder="----Please Select----" tabindex="1"> @*/*onchange="ResetBNDID()"*/*@
                                        <input type="text" id="RPTBNDID" class="RPTBNDID form-control hide" name="RPTBNDID" "value=" @System.Web.HttpContext.Current.Session["RPTBNDID"] ">

                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Ex Bond No<span class="required-field"></span> </label>
                                        <input type="text" id="EBNDDNO" class="EBNDDNO form-control" name="EBNDDNO" value="@System.Web.HttpContext.Current.Session["EBNDDNO"]" data-autocomplete-url=@Url.Action("AutoExBondNo", "BondSearch") placeholder="----Please Select----" tabindex="1"> @*/*onchange="ResetEBNDID()"*/*@
                                        <input type="text" id="RPTEBNDID" class="RPTEBNDID form-control hide" name="RPTEBNDID" value="@System.Web.HttpContext.Current.Session["RPTEBNDID"]">

                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <br />
                                    <input type="submit" name="submit" value="Search" class="btn btn-primary btn-xs" />
                                </div>

                            </form>
                        </div>
                    </div>

                    <div id="dbrpt" class="dbrpt" style="max-width:90%; align-content:center;">

                    </div>


                </div>
            </div>
            
        </div>
        
    </div>
    
</div>


@section Scripts {

    <script>
        function ResetEBNDID() {
            if ($("#EBNDDNO").val() == "")
                $("#RPTEBNDID").val('');
        }
        function ResetBNDID() {
            if ($("#BNDDNO").val() == "")
                $("#RPTBNDID").val('');
        }
        $(function () {
            add_autocomplete($("#BNDDNO"), "BNDDNO,RPTBNDID");   //---AutoComplete function for BOND INFORMATION-----
            add_autocomplete($("#EBNDDNO"), "EBNDDNO,RPTEBNDID");   //---AutoComplete function for EX-BOND INFORMATION-----
        });

        $(document).ready(function () {
        $(".preloader").show();
            
            var baseUrl = $("#BaseUrl").data("baseurl");            
            var url = '@Url.Action("GetBondDetails", "BondSearch")';
            //alert(url);
            $(".dbrpt").html("");
            $.ajax({
                type: 'post',
                url: url,
                /*dataType: 'json',*/
                success: function (data) {
                    console.log(data);
                    $(".dbrpt").html(data);
                },
                error: function (ex) {
                    //alert('Failed to data ' + ex);
                }
            });
            $(".preloader").hide();
        });

    </script>
}