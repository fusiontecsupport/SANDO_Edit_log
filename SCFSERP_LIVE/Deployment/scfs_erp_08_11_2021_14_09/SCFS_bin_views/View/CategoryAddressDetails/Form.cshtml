

@using scfs_erp.Models;
@model scfs_erp.Models.CategoryList


@{
    ViewBag.Title = "Category Address Form";
}

<style>
    #tabs ul li a:hover {
        background-color: #fff;
    }

    #tabs ul li a {
        color: #de3030;
    }

    .frm_hide {
        display: none;
    }

    .spacer5 {
        height: 30px;
    }
</style>

<link href="~/Content/Site.css" type="text/css" rel="stylesheet" />


@*@Html.Raw(ViewBag.msg)*@
<form action="@Url.Content("~/CategoryAddressDetails/savedata")" method="post" accept-charset="utf-8" id="attributesform" data-ng-controller="myController" name="attributesform">
    @Html.ValidationSummary(true)

    <div class="row">

        <div class="col-lg-3 hide">
            <div class="form-group">
                <label>primary</label>
                <input class="form-control" id="CATEID" value="@ViewBag.CATEID" name="CATEID" />
            </div>
        </div>

        <div class="col-lg-2 hide" style="position:absolute;margin-left:890px;margin-top:-5px"><a class="btn btn-warning  btn-sm" data-toggle="modal" id="attrcopy" data-target="#myModal" href="@Url.Action("Copy", "Attributes")/@ViewBag.ITEMID"><i class="fa fa-copy">copy</i></a></div>
    </div>
    <div class="row">
        @*<br /><br />*@
        <div class="panel-body">
            <div class="table-responsive" id="job_list_inner">
                <input type="text" id="TDETAIL_IDX" value="0" name="TDETAIL_IDX[]" class="TDETAIL_IDX" style="display:none" />
                <table class='table table-striped table-bordered bootstrap-datatable' id="TDETAIL">
                    <thead><tr><th align="center"><label>Address<span class="required-field"></span></label></th>
                        <th><label>State<span class="required-field"></span></label></th>
                        <th><label>GST No<span class="required-field"></span></label></th>
                        <th><label>Location</label></th>
                        <th> <a class="btn btn-success btn-sm" href="#" id="add_detail"><i class="fa fa-plus-square" style="color:white"></i></a></th></tr> </thead>
                    <tbody class="TDETAIL_BODY" id="TDETAIL_BODY">
                        @if (@ViewBag.CATEID != 0)
                        {
                            //if (@Model.CategoryAddressDetails.Count != 0)
                            //{
                            if (@Model.CategoryAddressDetails != null)
                            {
                                var order = 0;
                                foreach (Category_Address_Details details in Model.CategoryAddressDetails)
                                {
                                    order = ++order;
                        <tr class="item-row">
                            <td class="hidden">
                                <input class="form-control  CATEAID" id="CATEAID" name="CATEAID" value=@details.CATEAID>
                            </td>
                            <td class="col-lg-6">
                                @*<textarea name="CATEAADDR" class="form-control CATEAADDR hide" id="CATEAADDR" rows="5">@details.CATEAADDR1</textarea>*@
                                <div class="row">
                                    <div class="col-md-12">
                                        <fieldset>

                                            <!-- Text input-->
                                            <div class="form-group">
                                                <label class="col-sm-2 control-label" for="textinput">Address 1</label>
                                                <div class="col-sm-10">
                                                    <input class="form-control CATEAADDR1" id="CATEAADDR1" name="CATEAADDR1" value="@details.CATEAADDR1" type="text" placeholder="Address Line 1" required="required">
                                                </div>
                                            </div>

                                            <!-- Text input-->
                                            <div class="spacer5"></div>
                                            <div class="form-group top-buffer2">
                                                <label class="col-sm-2 control-label" for="textinput">Address 2</label>
                                                <div class="col-sm-10">
                                                    <input class="form-control CATEAADDR2" id="CATEAADDR2" name="CATEAADDR2" value="@details.CATEAADDR2" type="text" placeholder="Address Line 2" required="required">
                                                </div>
                                            </div>

                                            <!-- Text input-->
                                            <div class="spacer5"></div>
                                            <div class="form-group top-buffer3">
                                                <label class="col-sm-2 control-label" for="textinput">City</label>
                                                <div class="col-sm-10">
                                                    <input class="form-control CATEAADDR3" id="CATEAADDR3" name="CATEAADDR3" value="@details.CATEAADDR3" type="text" placeholder="City" required="required">
                                                </div>
                                            </div>

                                            <div class="spacer5"></div>
                                            <div class="form-group top-buffer">
                                                <label class="col-sm-2 control-label" for="textinput">Pincode</label>
                                                <div class="col-sm-10">
                                                    <input class="form-control CATEAADDR4" id="CATEAADDR4" name="CATEAADDR4" value="@details.CATEAADDR4" type="text" placeholder="Pincode" required="required">
                                                </div>
                                            </div>


                                        </fieldset>
                                    </div><!-- /.col-lg-12 -->
                                </div><!-- /.row -->
                            </td>
                            <td class="col-lg-2">
                                @Html.DropDownListFor(model => Model.CategoryAddressDetails[0].STATEID, new SelectList(ViewBag.STATEID, "Value", "Text", @details.STATEID), "Select State", new { @class = "form-control STATEID", @id = "STATEID", required = "required" })
                            </td>
                            

                            <td class="col-lg-2">
                                <input class="form-control CATEAGSTNO" id="CATEAGSTNO" name="CATEAGSTNO" value='@details.CATEAGSTNO' maxlength="15" required="required" onkeydown="return isAlphaNumberOnlyKey(event);" onkeyup="GetPANFrmGST(this);">
                                <label class="control-label" for="textinput">PAN No.</label>
                                <div class="col-sm-15">
                                    <input class="form-control CATEAPANNO" id="CATEAPANNO" name="CATEAPANNO" value='@details.CATEAPANNO' maxlength="15" required="required" onkeydown="return isAlphaNumberOnlyKey(event);">

                                </div>

                            </td>
                            <td class="col-lg-2"><input class="form-control CATEATYPEDESC" id="CATEATYPEDESC" name="CATEATYPEDESC" value='@details.CATEATYPEDESC' required="required"></td>
                            <td class="col-lg-1"><a class="btn btn-danger btn-sm" id="del_detail"> <i class="fa fa-trash-o" style="color:white"></i></a></td>
                        </tr>
                                }
                            }
                            else
                            {
                    <tr class="item-row">
                        <td class="hidden">
                            <input class="form-control hide CATEAID" id="CATEAID" name="CATEAID" value="0">
                        </td>
                        <td class="col-lg-4">
                            @*<textarea name="CATEAADDR" class="form-control CATEAADDR hide" id="CATEAADDR" rows="5" cols="6"></textarea>*@
                            <div class="row">
                                <div class="col-md-12">
                                    <fieldset>

                                        <!-- Text input-->
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label" for="textinput">Address 1</label>
                                            <div class="col-sm-10">
                                                <input class="form-control CATEAADDR1" id="CATEAADDR1" name="CATEAADDR1" type="text" placeholder="Address Line 1" required="required">
                                            </div>
                                        </div>

                                        <!-- Text input-->
                                        <div class="spacer5"></div>
                                        <div class="form-group top-buffer2">
                                            <label class="col-sm-2 control-label" for="textinput">Address 2</label>
                                            <div class="col-sm-10">
                                                <input class="form-control CATEAADDR2" id="CATEAADDR2" name="CATEAADDR2" type="text" placeholder="Address Line 2" required="required">
                                            </div>
                                        </div>

                                        <!-- Text input-->
                                        <div class="spacer5"></div>
                                        <div class="form-group top-buffer3">
                                            <label class="col-sm-2 control-label" for="textinput">City</label>
                                            <div class="col-sm-10">
                                                <input class="form-control CATEAADDR3" id="CATEAADDR3" name="CATEAADDR3" type="text" placeholder="Address Line 3" required="required">
                                            </div>
                                        </div>

                                        <!-- Text input-->
                                        <div class="spacer5"></div>
                                        <div class="form-group top-buffer">
                                            <label class="col-sm-2 control-label" for="textinput">Pincode</label>
                                            <div class="col-sm-10">
                                                <input class="form-control CATEAADDR4" id="CATEAADDR4" name="CATEAADDR4" type="text"  maxlength="6" placeholder="Pincode"   onkeydown="return isNumberCommaDot(event);" required="required">
                                            </div>
                                        </div>


                                    </fieldset>
                                </div><!-- /.col-lg-12 -->
                            </div>
                        </td>
                        <td class="col-lg-2">
                            @Html.DropDownListFor(model => Model.CategoryAddressDetails[0].STATEID, new SelectList(ViewBag.STATEID, "Value", "Text"), "Select State", new { @class = "form-control STATEID", @id = "STATEID", required = "required" })
                        </td>
                        <td class="col-lg-2">
                            <input class="form-control CATEAGSTNO" id="CATEAGSTNO" name="CATEAGSTNO" required="required" maxlength="15" onkeydown="return isAlphaNumberOnlyKey(event);"  onkeyup="GetPANFrmGST(this);">
                            <br />
                            <label class="control-label" for="textinput">PAN No.</label>
                            <div class="col-sm-15">
                                <input class="form-control CATEAPANNO" id="CATEAPANNO" name="CATEAPANNO" required="required" maxlength="15" onkeydown="return isAlphaNumberOnlyKey(event);">
                            </div>
                        </td>
                        
                        <td class="col-lg-2"><input class="form-control CATEATYPEDESC" id="CATEATYPEDESC" name="CATEATYPEDESC" required="required"></td>
                        <td class="col-lg-1"><a class="btn btn-danger btn-sm" id="del_detail"> <i class="fa fa-trash-o" style="color:white"></i></a></td>
                    </tr>


                            }
                        }
                        else
                        {
                    <tr class="item-row">
                        <td class="hidden">
                            <input class="form-control hide CATEAID" id="CATEAID" name="CATEAID" value="0">
                        </td>
                        <td class="col-lg-4">

                            <div class="row">
                                <div class="col-md-12">
                                    <fieldset>

                                        <!-- Text input-->
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label" for="textinput">Address 1</label>
                                            <div class="col-sm-10">
                                                <input class="form-control CATEAADDR1" id="CATEAADDR1" name="CATEAADDR1" type="text" placeholder="Address Line 1" required="required">
                                            </div>
                                        </div>

                                        <!-- Text input-->
                                        <div class="spacer5"></div>
                                        <div class="form-group top-buffer2">
                                            <label class="col-sm-2 control-label" for="textinput">Address 2</label>
                                            <div class="col-sm-10">
                                                <input class="form-control CATEAADDR2" id="CATEAADDR2" name="CATEAADDR2" type="text" placeholder="Address Line 2" required="required">
                                            </div>
                                        </div>

                                        <!-- Text input-->
                                        <div class="spacer5"></div>
                                        <div class="form-group top-buffer3">
                                            <label class="col-sm-2 control-label" for="textinput">City</label>
                                            <div class="col-sm-10">
                                                <input class="form-control CATEAADDR3" id="CATEAADDR3" name="CATEAADDR3" type="text" placeholder="City" required="required">
                                            </div>
                                        </div>

                                        <!-- Text input-->
                                        <div class="spacer5"></div>
                                        <div class="form-group top-buffer">
                                            <label class="col-sm-2 control-label" for="textinput">Pincode</label>
                                            <div class="col-sm-10">
                                                <input class="form-control CATEAADDR4" id="CATEAADDR4" name="CATEAADDR4" type="text" placeholder="Pincode" maxlength="6" onkeydown="return isNumberCommaDot(event);" required="required">
                                            </div>
                                        </div>


                                    </fieldset>
                                </div><!-- /.col-lg-12 -->
                            </div>
                        </td>

                        <td class="col-lg-2">
                            @Html.DropDownListFor(model => Model.CategoryAddressDetails[0].STATEID, new SelectList(ViewBag.STATEID, "Value", "Text"), "Select State", new { @class = "form-control STATEID", @id = "STATEID", required = "required" })
                        </td>
                        <td class="col-lg-2">
                            <input class="form-control CATEAGSTNO" id="CATEAGSTNO" name="CATEAGSTNO" required="required" maxlength="15" onkeydown="return isAlphaNumberOnlyKey(event);">
                            <br />
                            <label class="control-label" for="textinput">PAN No.</label>
                            <div class="col-sm-15">
                                <input class="form-control CATEAPANNO" id="CATEAPANNO" name="CATEAPANNO" required="required" maxlength="15" onkeydown="return isAlphaNumberOnlyKey(event);">

                            </div>

                        </td>


                        @*<td class="col-lg-2"><input class="form-control CATEAGSTNO" id="CATEAGSTNO" name="CATEAGSTNO" maxlength="15" required="required" onkeydown="return isAlphaNumberOnlyKey(event);"></td>*@
                        <td class="col-lg-2"><input class="form-control CATEATYPEDESC" id="CATEATYPEDESC" name="CATEATYPEDESC" required="required"></td>
                        <td class="col-lg-1"><a class="btn btn-danger btn-sm" id="del_detail"> <i class="fa fa-trash-o" style="color:white"></i></a></td>
                    </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="msg" hidden style="margin-left:0;margin-right:0"> </div>
    <div class="msg_error" hidden style="margin-left:0;margin-right:0"> </div>
    <div class="col-md-12 box-footer">
        <a href="@Url.Action("Index", "CategoryMaster")" class="btn btn-primary pull-left" onclick="javascript:return confirm('Are you sure you want to go back?')" tabindex="4012">Go Back</a>
        @*<input type="button" name="back" value="Go Back" class="btn btn-primary pull-left" onclick="JavaScript:history.back()" />*@
        <input type="button" name="save2" value="SaveChanges" id="save2" class="btn btn-success pull-right" />

    </div>
</form>
@section Scripts {
    <script type="text/javascript" src="~/Scripts/CommonValidation.js"></script>
    <script type="text/javascript" src="~/Scripts/jquery-key-restrictions.js"></script>
    <script src="~/Scripts/jquery.validate_tab.js" type="text/javascript"></script>
    <script>
        //function GetPANFrmGST($obj)
        //{
        //    var ridx = $($obj).parent().parent().index('tr');
        //    //alert($($obj).val());
        //    //alert(ridx);
        //    //alert($(".CATEAPANNO")[ridx].value);
        //    var tst = "";
        //    if ($($obj).val.length >= 10) {
        //        alert($($obj).val());
        //        tst = $($obj).val().substring(3, $($obj).val.length - 3)
        //        alert(tst);
        //    }
                
        //    $('.TDETAIL_BODY tr .CATEAPANNO')[ridx].value = tst;
        //    //$(".CATEAPANNO")[ridx].value = ($($obj).val().substring(3, $($obj).val.length- 3));
        //}

        $(function () {//Auto add event

           
            $(".datepicker").datepicker({ dateFormat: 'dd/mm/yy', });
            //$("#CATEAGSTNO").alphaNumericOnly();
        });
        $(function () {

            $(document).on('hidden.bs.modal', function (e) {
                var target = $(e.target);
                target.removeData('bs.modal')
                    .find(".modal-content").html('');
            });



            if ($("#CATEID").val() == "0") {
                $("#attrcopy").addClass("hide", "hide");
            }
        });


        $(function () {
            var rowcount = $('#TDETAIL tbody tr').length;
            $("#TDETAIL_IDX").val(rowcount);
            $("#add_detail").click(function () {
                //alert('HI');
                if ($("#TDETAIL_IDX").val() != 0) {
                    var $tableBody = $('#TDETAIL').find("tbody"),
                        $trLast = $tableBody.find("tr:last");
                    $trNew = $trLast.clone();
                    $trLast.after($trNew);
                    $trNew.find("input:text,select").val("");
                    $trNew.find(".CATEAID").val("0");
                    $trNew.find(".CATEAADDR1").val("");
                    $trNew.find(".CATEAADDR2").val("");
                    $trNew.find(".CATEAADDR3").val("");
                    $trNew.find(".CATEAADDR4").val("");
                    
                    var row_idx = parseInt($("#TDETAIL_IDX").val());
                    $("#TDETAIL_IDX").val(row_idx + 1);
                    $("#TDETAIL_BODY").show();
                }
                else {
                    $('#TDETAIL_IDX').val("1");
                    $("#TDETAIL_BODY").show();
                }
                return false;
            });

            $("#attributesform").on("click", "#del_detail", function () {
                var r = confirm("Are you sure to delete this record ?");
                if (r == true) {
                    row = this.parentNode.parentNode.rowIndex;
                    row = row - 1;
                    var $tableBody = $('#TDETAIL').find("tbody")

                    $trCur = $tableBody.find("tr:eq(" + row + ")");

                    idx = $("#TDETAIL_IDX").val();

                    if (idx == 1) {

                        var $tableBody = $('#TDETAIL').find("tbody")
                        $trCur = $tableBody.find("tr:eq(0)");
                        $trCur.find("input:text,select").val("");

                        $trCur.find(".CATEAID").val("0");
                        $trCur.find(".CATEAADDR1").val("");
                        $trCur.find(".CATEAADDR2").val("");
                        $trCur.find(".CATEAADDR3").val("");
                        $trCur.find(".CATEAADDR4").val("");

                        //total();
                    }
                    else {
                        $("#TDETAIL_BODY").show();
                        var row = this.parentNode.parentNode;

                        $(this).parents('.item-row').remove();
                        $("#TDETAIL_IDX").val($("#TDETAIL_IDX").val() - 1);
                        //total();
                    }

                }
                return false;

            });
        });

        $("#save2").click(function () {

            flag = true;
            i = 0;

            $('.TDETAIL_BODY tr').each(function () {
                if ($('.TDETAIL_BODY tr .CATEAADDR1')[i].value == "") {
                    alert("Please Enter Address Line 1 !!");
                    //$(".CATEAADDR1").focus();
                    $('.TDETAIL_BODY tr .CATEAADDR1')[i].focus();
                    flag = false;
                } else if ($('.TDETAIL_BODY tr .STATEID')[i].value == "") {
                    alert("Please Select State !!");
                    //$(".STATEID").focus();
                    $('.TDETAIL_BODY tr .STATEID')[i].focus();
                    flag = false;
                } else if ($('.TDETAIL_BODY tr .CATEAGSTNO')[i].value == "") {
                    alert("Please Enter GST No !!");
                    //$(".CATEAGSTNO").focus();
                    $('.TDETAIL_BODY tr .CATEAGSTNO')[i].focus();
                    flag = false;
                }
                else if ($('.TDETAIL_BODY tr .CATEAGSTNO')[i].value != "") {
                    if ($('.TDETAIL_BODY tr .CATEAGSTNO')[i].value.length < 15) {
                        alert("Please Enter 15 Character GST No !!");
                        //$(".CATEAGSTNO").focus();
                        $('.TDETAIL_BODY tr .CATEAGSTNO')[i].focus();
                        flag = false;
                    }
                    else if (!(isGstNumber($('.TDETAIL_BODY tr .CATEAGSTNO')[i].value))) {
                        alert(" Please specify a valid GST Number");
                        //$(".CATEAGSTNO").focus();
                        $('.TDETAIL_BODY tr .CATEAGSTNO')[i].focus();
                        flag = false;
                    }
                    else if ($('.TDETAIL_BODY tr .CATEAGSTNO')[i].value.length == 15) {
                        var gst = $('.TDETAIL_BODY tr .CATEAGSTNO')[i].value;
                        var pan = gst.substring(2, 12).toUpperCase();
                        var regex = /[a-zA-Z]{3}[PCHFATBLJG]{1}[a-zA-Z]{1}[0-9]{4}[a-zA-Z]{1}$/;
                        if (!regex.test(pan)) {
                            alert("Invalid GSTIN");
                            flag = false;
                            //return false;
                        }
                        else {
                            $('.TDETAIL_BODY tr .CATEAPANNO')[i].value = (pan);
                        }
                    }
                }
                i++;
            });
            
            if (flag) {
                var formdata = ($("#attributesform").serialize());
                console.log(formdata);
                $.ajax({
                    type: 'post',
                    url: '@Url.Action("savedata", "CategoryAddressDetails")', // we are calling json method
                    data: formdata,
                    success: function (data) {
                        if (data == "saved") {
                            alert('Address Details Saved Successfully !! ');
                            var returnurl = '@Url.Action("Index", "CategoryMaster")';
                            window.location.href = returnurl;
                        }

                    },

                    error: function (ex) {
                        alert('Failed to save data' + ex);
                    }
                });
            }


            //$('#attributesform  :text,select').each(function () {


            //});

            //$("#TDETAIL .TDETAIL_BODY tr").each(function () {

            //    var row = $(this);
            //    var categoryaddressdetails = {};
            //    categoryaddressdetails.CATEID = $('#CATEID').val();
            //    categoryaddressdetails.CATEAID = row.find("TD").eq(0).html();

            //    categoryaddressdetails.CATEAADDR1 = row.find("TD").eq(1).html();
            //    categoryaddressdetails.CATEAADDR2 = //row.find($('.TDETAIL_BODY tr #CATEAADDR2').value);
            //    categoryaddressdetails.CATEAADDR3 = //row.find($('.TDETAIL_BODY tr #CATEAADDR3').value);
            //    categoryaddressdetails.CATEAADDR4 = //row.find($('.TDETAIL_BODY tr #CATEAADDR4').value);
            //    categoryaddressdetails.STATEID = row.find("TD").eq(2).html(); //row.find($('.TDETAIL_BODY tr #STATEID').value);
            //    categoryaddressdetails.CATEAGSTNO = row.find("TD").eq(3).html();
            //    categoryaddressdetails.CATEATYPEDESC = row.find("TD").eq(4).html();
            //    F_Form.push(categoryaddressdetails);
            //    console.log(F_Form);
            //});


            //}

        });

        function Validate() {
            flag = true;
            i = 0;
            if (flag) {
                $('.TDETAIL_BODY tr').each(function () {
                    if ($('.TDETAIL_BODY tr .CATEAADDR1')[i].value == "") {
                        alert("Please Enter Address Line 1 !!");
                        $(".CATEAADDR1").focus();
                        flag = false;
                    } else if ($('.TDETAIL_BODY tr .STATEID')[i].value == "") {
                        alert("Please Select State !!");
                        $(".STATEID").focus();
                        flag = false;
                    } else if ($('.TDETAIL_BODY tr .CATEAGSTNO')[i].value == "") {
                        alert("Please Enter GST No. !!");
                        $(".STATEID").focus();
                        flag = false;
                    }
                    i++;
                });
            }
        }


        @*$(function () {
            $("#save2").click(function () {
                var formdata = ($("#attributesform").serialize());
                //alert(formdata);
                var bad = 0;
                $('#attributesform  :text,select').each(function () {
                    switch (this.id) {
                        case "CATEAADDR1":
                            if ($.trim(this.value) == "") {
                                alert("Please Enter the Address Line 1 !!");
                                bad++;
                                this.focus();
                            }
                            if (bad >= 1) { return false; }
                            break;
                        case "STATEID":
                            if ($.trim(this.value) == "") {
                                alert("Please Select the State !!");
                                bad++;
                                this.focus();
                            }
                            if (bad >= 1) { return false; }
                            break;

                        case "CATEAGSTNO":
                            if ($.trim(this.value) == "") {
                                alert("Please Enter the GST No. !!");
                                bad++;
                                this.focus();
                            }
                            if (bad >= 1) { return false; }
                            break;
                        default:
                            if ($.trim(this.value) == "") {

                                bad++;

                            }
                    }
                });
                //alert(bad);
                if (bad >= 1) {

                    return false;
                }
                else {


                    if (bad == 0) {
                        swal({
                            title: "Are you sure?",
                            text: "Are you sure that you want to submit this record?",
                            type: "warning",
                            confirmButtonText: "Yes",
                            showCancelButton: true,
                            cancelButtonText: "No",
                            showCloseButton: true
                        })
                            .then((result) => {
                                if (result.value) {

                                    //
                                    $.ajax({
                                        type: 'post',
                                        url: '@Url.Action("savedata", "CategoryAddressDetails")', // we are calling json method
                                        data: formdata,
                                        success: function (data) {
                                            if (data == "saved") {

                                                swal({
                                                    title: "Saved",
                                                    text: "Address Details Successfully Updated",
                                                    type: "success"
                                                }
                                                    //, function () {
                                                    //    window.location = "index.php";
                                                    //}
                                                );

                                                //alert("Customer Location Details Updated Successfully !!");
                                                // $('.msg').html("Saved Successfully");
                                                // $('.msg').show();
                                                // $('.msg').delay(1200).fadeOut(1000);
                                            }

                                        },

                                        error: function (ex) {
                                            alert('Failed to save data ' + ex);
                                        }
                                    });

                                } else if (result.dismiss === 'cancel') {

                                    //
                                    return false;
                                    //
                                }
                            });
                    }

                }
            });

        });*@

        //...............Amend//


        function pad(input) {
            var BASE = "0000";
            return input ? BASE.substr(0, 4 - Math.ceil(input / 10)) + input : BASE;
        }

        $(document).ready(function () {
            $("input:text")
                .focus(function () { $(this).select(); })
                .mouseup(function (e) { e.preventDefault(); });
        });

    </script>
}
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" style="z-index:0">


        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
